(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{76736:(e,t,a)=>{Promise.resolve().then(a.bind(a,58042))},58042:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(95155),r=a(66561),l=a.n(r),n=a(18108),i=a(12115),c=a(27058),o=a(38074);let d=e=>{let{heading:t,data:a}=e,[r,d]=(0,i.useState)(1),u=[10,20,30,50,100],[g,h]=(0,i.useState)(u[0]),[p,m]=(0,i.useState)(""),[f,v]=(0,i.useState)([]),[x,y]=(0,i.useState)([]),[w,b]=(0,i.useState)({columnAccessor:Object.keys(a[0]||{})[0]||"player_id",direction:"asc"}),j=(0,c.aU)(),{user:N}=(0,o.A)(),[P,k]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{let e=(0,c.rJ)(j,"events"),t=(0,c.P)(e,(0,c._M)("status","==","live")),a=await (0,c.GG)(t);if(!a.empty){let e=a.docs[0];k(e.id)}}catch(e){console.error("Error fetching live event:",e)}})()},[j]),(0,i.useEffect)(()=>{N&&P&&(async()=>{try{let e=(0,c.H9)(j,"users",N.uid),t=await (0,c.x7)(e);if(t.exists()){let e=t.data();if(e.pickems&&e.pickems[P]){let t=e.pickems[P],s=a.filter(e=>t.includes(e.player_id));y(s),v(s)}}}catch(e){console.error("Error fetching saved picks:",e)}})()},[N,j,a,P]);let S=(0,i.useMemo)(()=>a.filter(e=>Object.keys(e).some(t=>{let a=e[t];return"string"==typeof a?a.toLowerCase().includes(p.toLowerCase()):("number"==typeof a||"boolean"==typeof a)&&a.toString().toLowerCase().includes(p.toLowerCase())})),[a,p]),_=(0,i.useMemo)(()=>{let e=l()(S,w.columnAccessor);return"desc"===w.direction?e.reverse():e},[S,w]),C=(0,i.useMemo)(()=>{let e=(r-1)*g,t=e+g;return _.slice(e,t)},[_,r,g]),E=e=>{if(e){let t=new Date(e),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1;return(10>t.getDate()?"0"+t.getDate():t.getDate())+"/"+a+"/"+t.getFullYear()}return""},A=(0,i.useMemo)(()=>0===a.length?[]:Object.keys(a[0]).map(e=>{let t=e.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/(^\w|\s\w)/g,e=>e.toUpperCase()),a={accessor:e,title:t,sortable:!0};return"dob"===e&&(a.render=t=>E(t[e])),a}),[a]),O=e=>{f.some(t=>t.player_id===e.player_id)?(v(t=>t.filter(t=>t.player_id!==e.player_id)),y(t=>t.filter(t=>t.player_id!==e.player_id))):x.length<7?(v(t=>[...t,e]),y(t=>[...t,e])):alert("You can only pick 7 players.")},M=async()=>{if(!N){alert("You must be logged in to save picks.");return}if(!P){alert("No live event available.");return}let e=x.map(e=>e.player_id);try{await (0,c.mZ)((0,c.H9)(j,"users",N.uid),{["pickems.".concat(P)]:e}),alert("Picks saved successfully!")}catch(e){console.error("Error saving picks:",e),alert("Error saving picks. Please try again.")}};return(0,s.jsxs)("div",{className:"flex gap-10",children:[(0,s.jsx)("div",{className:"w-1/2",children:(0,s.jsxs)("div",{className:"bg-slate-100 p-4 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"mb-5 flex flex-col gap-5 md:flex-row items-center md:justify-between",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-slate-600 flex flex-row items-center gap-3 justify-start my-auto",children:t}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)("input",{type:"text",className:"form-input text-white placeholder-slate-300 bg-slate-600 border-black border rounded-md p-2 w-auto",placeholder:"Search Player/Teams....",value:p,onChange:e=>m(e.target.value)})})]}),(0,s.jsx)("div",{className:"datatables w-auto",children:(0,s.jsx)(n.bQ,{highlightOnHover:!0,className:"table-hover whitespace-nowrap rounded-lg",records:C,columns:[{accessor:"action",title:"Action",render:e=>(0,s.jsx)("input",{type:"checkbox",checked:f.some(t=>t.player_id===e.player_id),onChange:()=>O(e)})},...A],totalRecords:_.length,recordsPerPage:g,page:r,onPageChange:d,recordsPerPageOptions:u,onRecordsPerPageChange:h,sortStatus:w,onSortStatusChange:b,minHeight:200,paginationText:e=>{let{from:t,to:a,totalRecords:s}=e;return"Showing ".concat(t," to ").concat(a," of ").concat(s," entries")}})})]})}),(0,s.jsx)("div",{className:"w-1/2",children:(0,s.jsxs)("div",{className:"bg-slate-100 p-4 rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-slate-600 flex flex-row items-center gap-3 justify-start my-auto",children:"Your Picks"}),(0,s.jsx)("div",{className:"datatables w-auto p-4",children:(0,s.jsx)("div",{className:"datatables w-auto p-4",children:(0,s.jsx)(n.bQ,{highlightOnHover:!0,className:"table-hover whitespace-nowrap rounded-lg",records:x,columns:A,totalRecords:x.length,minHeight:200,withTableBorder:!0,striped:!0,stripedColor:"gray",page:1,onPageChange:()=>{},recordsPerPage:x.length||1,onRecordsPerPageChange:()=>{},recordsPerPageOptions:[x.length||1],paginationText:e=>{let{from:t,to:a,totalRecords:s}=e;return"Showing ".concat(t," to ").concat(a," of ").concat(s," entries")}})})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{onClick:M,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Save Picks"})})]})})]})};var u=a(88652),g=a(13970);function h(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async function(){try{console.log("Fetching events list...");let e=(0,c.rJ)(u.db,"events"),t=(await (0,c.GG)(e)).docs.map(e=>({id:e.id,name:e.get("name")||"Unnamed Event",status:e.get("status")||"archived"})).find(e=>"live"===e.status);r(t||null)}catch(e){console.error("Error fetching events:",e.message)}})()},[]),(0,i.useEffect)(()=>{(async function(){if(a)try{console.log("Fetching player data for event:",a.id);let e=["player_id","Player","Team","Player Number"],s=(0,c.rJ)(u.db,"events/".concat(a.id,"/players")),r=(await (0,c.GG)(s)).docs.map(t=>{let a=t.data(),s=e.reduce((e,t)=>(void 0!==a[t]&&(e[t]=a[t]),e),{});return{player_id:a.player_id,...s}});t(r),console.log("Player data fetched successfully:",r)}catch(e){console.error("Error fetching player data:",e.message)}})()},[a]),(0,s.jsxs)("div",{className:"flex flex-col p-4 min-h-screen bg-white",children:[(0,s.jsxs)("div",{className:"dropdown flex flex-row items-center text-gray-600 gap-3 text-lg",children:[(0,s.jsx)("span",{className:"font-medium",children:"Picks"}),a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.l_J,{size:16}),(0,s.jsxs)("span",{children:[a.name," ",(0,s.jsx)("span",{className:"text-green-600",children:"(live)"})]})]}):(0,s.jsx)("span",{className:"text-gray-400",children:"(No live event)"})]}),(0,s.jsx)("div",{className:"p-4 w-full text-center",children:(0,s.jsx)(d,{heading:(null==a?void 0:a.name)||"No Event Selected",data:e})})]})}},38074:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>o});var s=a(95155),r=a(12115),l=a(14565),n=a(88652);let i=(0,r.createContext)(void 0),c=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},o=e=>{let{children:t}=e,[a,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),[u,g]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,l.hg)(n.j2,e=>{c(e),d(e?e.uid:null),g(!1)});return()=>e()},[]);let h=async(e,t)=>{if(!(await (0,l.x9)(n.j2,e,t)).user.emailVerified)throw await (0,l.CI)(n.j2),Error("Please verify your email before logging in.")},p=async(e,t)=>{let a=await (0,l.eJ)(n.j2,e,t);await (0,l.gA)(a.user),await (0,l.CI)(n.j2)},m=async()=>{let e=new l.HF;await (0,l.df)(n.j2,e)},f=async()=>{await (0,l.CI)(n.j2)};return(0,s.jsx)(i.Provider,{value:{user:a,userId:o,loginWithEmail:h,registerWithEmail:p,loginWithGoogle:m,logout:f},children:!u&&t})}},88652:(e,t,a)=>{"use strict";a.d(t,{db:()=>i,hJ:()=>o,j2:()=>c});var s=a(49904),r=a(14565),l=a(27058);let n=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyA1SBDORqH7rb573hhb9S4--g3rWMxDMOg",authDomain:"fantasy-paintball.firebaseapp.com",projectId:"fantasy-paintball",storageBucket:"fantasy-paintball.firebasestorage.app",messagingSenderId:"608553503135",appId:"1:608553503135:web:14f937951c06703dab95aa",measurementId:"G-FY5X5G73FX"}),i=(0,l.aU)(n),c=(0,r.xI)(n),o=new r.HF}},e=>{var t=t=>e(e.s=t);e.O(0,[992,895,446,545,861,297,300,441,517,358],()=>t(76736)),_N_E=e.O()}]);