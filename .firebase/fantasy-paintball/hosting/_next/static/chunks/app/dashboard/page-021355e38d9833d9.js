(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{51454:(e,t,s)=>{Promise.resolve().then(s.bind(s,69536))},69536:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(95155),r=s(66561),n=s.n(r),l=s(18108),o=s(12115),c=s(13970),d=s(87747);let i=(0,o.forwardRef)((e,t)=>{let[s,r]=(0,o.useState)(!1),n=(0,o.useRef)(),l=(0,o.useRef)(),{styles:c,attributes:i}=(0,d.E)(n.current,l.current,{placement:e.placement||"bottom-end",modifiers:[{name:"offset",options:{offset:e.offset||[0]}}]}),m=e=>{n.current.contains(e.target)||l.current.contains(e.target)||r(!1)};return(0,o.useEffect)(()=>(document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}),[]),(0,o.useImperativeHandle)(t,()=>({close(){r(!1)}})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{ref:n,type:"button",className:e.btnClassName,onClick:()=>r(!s),children:e.button}),(0,a.jsx)("div",{ref:l,style:c.popper,...i.popper,className:"z-50",onClick:()=>r(!s),children:s&&e.children})]})}),m=e=>{let{heading:t,data:s}=e,[r,d]=(0,o.useState)(1),m=[10,20,30,50,100],[u,p]=(0,o.useState)(m[0]),[h,g]=(0,o.useState)(""),[x,f]=(0,o.useState)([]),[b,y]=(0,o.useState)({columnAccessor:Object.keys(s[0]||{})[0]||"player_id",direction:"asc"}),v=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},j=(0,o.useMemo)(()=>s.filter(e=>Object.keys(e).some(t=>{let s=e[t];return"string"==typeof s?s.toLowerCase().includes(h.toLowerCase()):("number"==typeof s||"boolean"==typeof s)&&s.toString().toLowerCase().includes(h.toLowerCase())})),[s,h]),w=(0,o.useMemo)(()=>{let e=n()(j,b.columnAccessor);return"desc"===b.direction?e.reverse():e},[j,b]),N=(0,o.useMemo)(()=>{let e=(r-1)*u,t=e+u;return w.slice(e,t)},[w,r,u]),S=e=>{if(e){let t=new Date(e),s=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1;return(10>t.getDate()?"0"+t.getDate():t.getDate())+"/"+s+"/"+t.getFullYear()}return""},k=(0,o.useMemo)(()=>0===s.length?[]:Object.keys(s[0]).map(e=>{let t=e.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/(^\w|\s\w)/g,e=>e.toUpperCase()),s={accessor:e,title:t,sortable:!0};return"dob"===e&&(s.render=t=>S(t[e])),s}),[s]);return(0,o.useEffect)(()=>{f([])},[k]),(0,a.jsxs)("div",{className:"bg-slate-100 p-4 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"mb-5 flex flex-col gap-5 md:flex-row items-center md:justify-between",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-slate-600 flex flex-row items-center gap-3 justify-start my-auto",children:t}),(0,a.jsx)("div",{className:"flex flex-col gap-5 md:flex-row md:items-center",children:(0,a.jsx)("div",{className:"dropdown",children:(0,a.jsx)(i,{placement:"bottom-start",btnClassName:"!flex items-center border font-semibold border-[#253b5c] rounded-md px-4 py-2 text-sm bg-slate-800 text-white",button:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"ltr:mr-1 rtl:ml-1",children:"Show/Hide Columns"}),(0,a.jsx)(c.z44,{className:"h-5 w-5"})]}),children:(0,a.jsx)("ul",{className:"!min-w-[140px] bg-slate-400 rounded-lg",children:k.map((e,t)=>(0,a.jsx)("li",{className:"flex flex-col border-b-2 border-white",onClick:e=>e.stopPropagation(),children:(0,a.jsx)("div",{className:"flex items-center px-4 py-1",children:(0,a.jsxs)("label",{className:"mb-0 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:!x.includes(e.accessor),className:"form-checkbox",onChange:()=>v(e.accessor)}),(0,a.jsx)("span",{className:"ltr:ml-2 rtl:mr-2",children:e.title})]})})},t))})})})}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("input",{type:"text",className:"form-input text-white placeholder-slate-300 bg-slate-600 border-black border rounded-md p-2 w-auto",placeholder:"Search Player/Teams....",value:h,onChange:e=>g(e.target.value)})})]}),(0,a.jsx)("div",{className:"datatables w-auto",children:(0,a.jsx)(l.bQ,{highlightOnHover:!0,className:"table-hover whitespace-nowrap rounded-lg",records:N,columns:k.filter(e=>!x.includes(e.accessor)),totalRecords:w.length,recordsPerPage:u,page:r,onPageChange:d,recordsPerPageOptions:m,onRecordsPerPageChange:p,sortStatus:b,onSortStatusChange:y,minHeight:200,paginationText:e=>{let{from:t,to:s,totalRecords:a}=e;return"Showing ".concat(t," to ").concat(s," of ").concat(a," entries")}})})]})};var u=s(88652),p=s(27058),h=s(28100);function g(){let[e,t]=(0,o.useState)([]),[s,r]=(0,o.useState)([]),[n,l]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async function(){try{console.log("Fetching events list...");let e=(0,p.rJ)(u.db,"events"),t=(await (0,p.GG)(e)).docs.map(e=>({id:e.id,name:e.get("name")||"Unnamed Event",status:e.get("status")||"archived"}));r(t);let s=t.find(e=>"live"===e.status)||t[0];s&&l(s)}catch(e){console.error("Error fetching events:",e.message)}})()},[]),(0,o.useEffect)(()=>{(async function(){if(n)try{console.log("Fetching player data for event:",n.id);let e=(0,p.rJ)(u.db,"events/".concat(n.id,"/players")),s=(await (0,p.GG)(e)).docs.map(e=>{let{Cost:t,...s}=e.data(),a=["player_id","Player","Team","Rank","Player Number"],r=Object.keys(s).sort((e,t)=>{let s=a.indexOf(e),r=a.indexOf(t);return -1===s&&-1===r?0:-1===s?1:-1===r?-1:s-r}).reduce((e,t)=>(e[t]=s[t],e),{});return{player_id:e.get("player_id"),...r}});t(s),console.log("Player data fetched successfully:",s)}catch(e){console.error("Error fetching player data:",e.message)}})()},[n]);let d=e=>{l(e)};return(0,a.jsxs)("div",{className:"flex flex-col p-4 min-h-screen bg-white",children:[(0,a.jsxs)("div",{className:"dropdown flex flex-row items-center text-gray-600 gap-3 md:text-lg text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Events"}),(0,a.jsx)(c.l_J,{size:16}),(0,a.jsxs)("span",{children:[null==n?void 0:n.name," ",(0,a.jsxs)("span",{className:(null==n?void 0:n.status)==="live"?"text-green-600":"text-red-600",children:["(",null==n?void 0:n.status,")"]})]}),(0,a.jsx)(i,{placement:"bottom-end",btnClassName:"btn p-2 rounded-md border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors duration-200 text-gray-800",button:(0,a.jsx)(h.r32,{size:16,className:"opacity-80"}),children:(0,a.jsx)("ul",{className:"min-w-[170px] bg-white border border-gray-200 rounded-md shadow-lg py-1",children:s.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{type:"button",onClick:()=>d(e),className:"w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[e.name," ",(0,a.jsxs)("span",{className:"live"===e.status?"text-green-600":"text-red-600",children:["(",e.status,")"]})]})},e.id))})})]}),(0,a.jsx)("div",{className:"p-4 w-full text-center",children:(0,a.jsx)(m,{heading:(null==n?void 0:n.name)||"No Event Selected",data:e})})]})}},88652:(e,t,s)=>{"use strict";s.d(t,{db:()=>o,hJ:()=>d,j2:()=>c});var a=s(49904),r=s(14565),n=s(27058);let l=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyA1SBDORqH7rb573hhb9S4--g3rWMxDMOg",authDomain:"fantasy-paintball.firebaseapp.com",projectId:"fantasy-paintball",storageBucket:"fantasy-paintball.firebasestorage.app",messagingSenderId:"608553503135",appId:"1:608553503135:web:14f937951c06703dab95aa",measurementId:"G-FY5X5G73FX"}),o=(0,n.aU)(l),c=(0,r.xI)(l),d=new r.HF}},e=>{var t=t=>e(e.s=t);e.O(0,[992,895,446,204,545,861,297,300,747,441,517,358],()=>t(51454)),_N_E=e.O()}]);